!function(){"use strict";var a={getRouteSearch:function(a,b){var c="imoveis/";return 1==a&&(c+="comprar/"),2==a&&(c+="alugar/"),3==a&&(c+="lancamentos/"),1==b&&(c+="apartamento/"),2==b&&(c+="casa/"),3==b&&(c+="casa-de-condominio/"),4==b&&(c+="sobrado/"),c},resultTitle:function(a,b,c){var d="";return"comprar"==a&&(0==b&&(d="Nenhum imóveis para comprar"),1==b&&(d=b+" Imóvel para comprar"),b>1&&(d=b+" Imóveis para comprar")),"alugar"==a&&(0==b&&(d="Nenhum imóveis para alugar"),1==b&&(d=b+" Imóvel para alugar"),b>1&&(d=b+" Imóveis para alugar")),"lancamentos"==a&&(0==b&&(d="Nenhum lançamento de imóvel novo"),1==b&&(d=b+" Lançamento de imóvel novo"),b>1&&(d=b+" Lançamentos de imóveis novos")),d},categorySlug:function(a){var b="comprar";return 2==a&&(b="alugar"),3==a&&(b="lancamentos"),b},initMap:function(a,b){var c={lat:a,lng:b},d=new google.maps.Map(document.getElementById("map"),{center:c,scrollwheel:!1,zoom:15});new google.maps.Marker({position:c,map:d,title:"Hello World!"})},setCookie:function(a,b,c,d,e,f){var g=new Date,h=new Date;h.setTime(g.getTime()+864e5*c);var i=a+"="+escape(b)+(h?"; expires="+h.toGMTString():"")+(d?"; path="+d:"")+(e?"; domain="+e:"")+(f?"; secure":"");document.cookie=i},getCookie:function(a){var b=document.cookie,c=a+"=",d=b.indexOf("; "+c);if(d==-1){if(d=b.indexOf(c),0!=d)return null}else d+=2;var e=b.indexOf(";",d);return e==-1&&(e=b.length),unescape(b.substring(d+c.length,e))},removeCookie:function(b){a.getCookie(b)&&(document.cookie=b+"=; expires=Thu, 01-Jan-70 00:00:01 GMT")}},b=angular.module("App",["ngRoute","ngSanitize","ngResource"]),c="https://meuempreend.000webhostapp.com";b.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"app/templates/views/home.html",controller:"HomeCtrl",className:"home"}).when("/imoveis/:category",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl",className:"imoveis"}).when("/imoveis/:category/page/:numbPage",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl",className:"imoveis"}).when("/imoveis/:category/:type",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl",className:"imoveis"}).when("/imoveis/:category/:type/page/:numbPage",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl",className:"imoveis"}).when("/imoveis/:category/:type/:uf",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl",className:"imoveis"}).when("/imoveis/:category/:type/:uf/page/:numbPage",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl",className:"imoveis"}).when("/imoveis/:category/:type/:uf/:city",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl"}).when("/imoveis/:category/:type/:uf/:city/page/:numbPage",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl"}).when("/imoveis/:category/:type/:uf/:city/:district",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl",className:"imoveis"}).when("/imoveis/:category/:type/:uf/:city/:district/page/:numbPage",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl",className:"imoveis"}).when("/imovel/:slug",{templateUrl:"app/templates/views/imovel.html",controller:"ImovelCtrl",className:"imovel",routeName:"slug",css:["/dist/css/libs/owl.carousel.min.css"],js:["https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js","https://maps.googleapis.com/maps/api/js?key=AIzaSyCnTbp7Okfk-O8xkygex9gegjisIurICs0","/dist/js/libs/owl.carousel.min.js"]}).otherwise({templateUrl:"app/templates/views/404.html"}),b.html5Mode(!0).hashPrefix("!")}]);b.run(["$rootScope","$document",function(b,c){b.$on("$routeChangeStart",function(a,c,d){b.title="Conectando...",b.loaded=!0}),b.$on("$routeChangeSuccess",function(c,d,e){var f=d.params.category,g=f;if("home"==d.$$route.className&&(g=a.categorySlug(1)),"imovel"==d.$$route.className){var h=d.params.slug,i=h.indexOf("+");g="imovel "+h.substring(0,i)}b.bodyClass=d.$$route.className+" "+g,b.currentRoute=d.$$route.className,b.currentCat=f})}]),b.controller("HomeCtrl",["$scope","apiConnect","$location","$routeParams","$rootScope","$timeout",function(b,c,d,e,f,g){b.opcaoCategoria="1",b.opcaoTipo="1",b.buscar="",f.loaded=!1,f.title="Seu Imóvel novo pode está aqui.",b.getChangeValue=function(b){f.bodyCl="home "+a.categorySlug(b)},b.searchImovel=function(){var b=this.opcaoCategoria,c=this.opcaoTipo,e=a.getRouteSearch(b,c);d.path(e)},b.help=function(a){0==a&&g(function(){b.completing=!1,b.sugest=!1},200),1==a&&""==this.buscar&&(b.sugest=!0),1==a&&""!=this.buscar&&(b.completing=!0),console.log("buscar: "+this.buscar)},b.search=function(d){if(""==d)b.bairros="",b.cidades="",b.completing=!1,b.sugest=!0;else{b.urlPath=a.getRouteSearch(this.opcaoCategoria,this.opcaoTipo);var e=this.opcaoCategoria,f=this.opcaoTipo,g=d+"&cat="+e+"&type="+f;c.getLocalizacao("localizacao",g).then(function(a){"null"!=a.data?(b.sugest=!1,b.completing=!0,b.bairros=a.data.bairros,b.cidades=a.data.cidades,b.resultZero=!1):(b.bairros="",b.cidades="",b.resultZero=!0,b.completing=!0)},function(a){console.error(a)})}};var h=JSON.parse(a.getCookie("locations"));if(h){var i=h.uf,j=h.city;b.localizacao=" em "+h.local}if(!h)var i="",j="";var k=3,l=1,m=i,n=j,o=k+"&type="+l+"&uf="+m+"&city="+n;c.getCustomHome("home",o).then(function(a){b.lancamentosImoveis=a.data.imovel,$(function(){$(".owl-carousel").owlCarousel({loop:!0,margin:10,items:1,autoplay:!0,autoplayTimeout:5e3,autoplayHoverPause:!0,nav:!0})})},function(a){console.error(a)}),k=1,l=null,o=k+"&type="+l+"&uf="+m+"&city="+n,c.getCustomHome("home",o).then(function(a){b.sugestoesImoveis=a.data.imovel,$(function(){$(".owl-carousel").owlCarousel({loop:!0,margin:10,items:1,autoplay:!0,autoplayTimeout:5e3,autoplayHoverPause:!0,nav:!0})})},function(a){console.error(a)})}]),b.controller("ImoveisCtrl",["$scope","apiConnect","$location","$routeParams","$rootScope",function(b,c,d,e,f){b.allImoveis="",b.category=e.category,b.type=e.type,console.log(e);var g="imoveis/";g+=null!=e.category?e.category:"",g+=null!=e.type?"/"+e.type:"",g+=null!=e.uf?"/"+e.uf:"",g+=null!=e.city?"/"+e.city:"",g+=null!=e.district?"/"+e.district:"",b.rotaDefultPage=g;var h={comprar:1,alugar:2,lancamentos:3},i={apartamento:1,casa:2,"casa-de-condominio":3,sobrado:4},j=null!=e.numbPage?e.numbPage:1,k=null!=e.type?i[e.type]:null,l=null!=e.uf?e.uf:null,m=null!=e.city?e.city:null,n=null!=e.district?e.district:null,o=h[e.category]+"&type="+k+"&uf="+l+"&city="+m+"&district="+n;c.getImoveis("imoveis",j,o).then(function(c){b.currentPage=c.data.currentPage;var d=parseInt(c.data.currentPage);if(f.loaded=!1,f.title=c.data.head.title,b.isPage=c.data.length>1?c.data.length:1,b.page=function(){for(var a=0,b=7,e=[],f=c.data.totalPages,h=1;h<=f;h++)1==h&&e.push({link:g,num:h,Cl:h==d?"active":""}),h>1&&e.push({link:g+"/page/"+h,num:h,Cl:h==d?"active":""});return f>7&&(d>3&&d<e.length-3&&(a=d-4,b=d+3),d>=e.length-3&&f>3&&(a=e.length-7,b=e.length)),e.slice(a,b)},b.prev=function(){var a=null;return d>1&&(a=parseInt(d)-1==1?"":"/page/"+(parseInt(d)-1)),a},b.next=function(){var a="/page/"+c.data.totalPages,b=c.data.totalPages;return d<b&&(a="/page/"+(parseInt(d)+1)),a},b.resultTotal=a.resultTitle(e.category,c.data.retults,e.type),b.breadcumbs=c.data.breadcumbs,b.allImoveis=c.data.imovel,$(function(){$(".owl-carousel").owlCarousel({loop:!0,margin:10,items:1,autoplay:!1,autoplayTimeout:0,nav:!0})}),null!=l&&""!=l&&null!=m&&""!=m){var h={uf:l,city:m,local:b.breadcumbs[4].label+" - "+b.breadcumbs[3].label};a.setCookie("locations",JSON.stringify(h),7,"/")}},function(a){console.error(a)}),b.searchImovel=function(){var b=this.opcaoCategoria,c=this.opcaoTipo,e=(this.buscar,a.getRouteSearch(b,c));d.path(e)}}]),b.controller("ImovelCtrl",["$scope","apiConnect","$location","$routeParams","$rootScope","$window","$timeout",function(b,c,d,e,f,g,h){var i=e.slug;c.getImovel("imovel",encodeURIComponent(i)).then(function(c){f.loaded=!1,f.currentCat=a.categorySlug(c.data.imovel.categoria),b.isPage=c.data.length>1?c.data.length:1,f.title=c.data.head.title,b.breadcumbs=c.data.breadcumbs,b.imovel=c.data.imovel,b.relation=c.data.relacionados,$(function(){$(".gallery-main .owl-carousel").owlCarousel({loop:!0,margin:10,items:1,autoplay:!0,autoplayTimeout:3e3,autoplayHoverPause:!0,nav:!0}),$("#relation .gallery .owl-carousel").owlCarousel({loop:!0,margin:10,items:1,autoplay:!1,autoplayTimeout:0,nav:!0})});var d={uf:b.imovel.slug_uf[0],city:b.imovel.slug_city[0],local:b.breadcumbs[4].label+" - "+b.breadcumbs[3].label};a.setCookie("locations",JSON.stringify(d),7,"/"),b.googleMap=!0,""==c.data.imovel.address_lat&&""==c.data.imovel.address_lng&&(b.googleMap=!1);var e=parseFloat(c.data.imovel.address_lat),g=parseFloat(c.data.imovel.address_lng);h(function(){a.initMap(e,g)},500)},function(a){console.error(a)})}]),b.factory("apiConnect",["$q","$http",function(a,b){return{getCustomHome:function(d,e){"undefined"==e&&(e=null);var f=a.defer(),g=b.get(c+"/service/?info="+d+"&cat="+e+"&token=8c54dbf7be1b415eeecff30f9f2288c7");return g.then(function(a){f.resolve(a)},function(a){console.error(a)}),f.promise},getImoveis:function(d,e,f){"undefined"==f&&(f=null);var g=a.defer(),h=b.get(c+"/service/?info="+d+"&pag="+e+"&cat="+f+"&token=8c54dbf7be1b415eeecff30f9f2288c7");return h.then(function(a){g.resolve(a)},function(a){console.error(a)}),g.promise},getImovel:function(d,e){var f=a.defer(),g=b.get(c+"/service/?info="+d+"&slug="+e+"&token=8c54dbf7be1b415eeecff30f9f2288c7");return g.then(function(a){f.resolve(a)},function(a){console.error(a)}),f.promise},getLocalizacao:function(d,e){var f=a.defer(),g=b.get(c+"/service/?info="+d+"&param="+e+"&token=8c54dbf7be1b415eeecff30f9f2288c7");return g.then(function(a){f.resolve(a)},function(a){console.error(a)}),f.promise}}}])}();