!function(){"use strict";function a(a,b){var c="imoveis/";return 1==a&&(c+="comprar/"),2==a&&(c+="alugar/"),3==a&&(c+="lancamentos/"),1==b&&(c+="apartamento/"),2==b&&(c+="casa/"),3==b&&(c+="casa-de-condominio/"),4==b&&(c+="sobrado/"),c}function b(a,b,c){var d="";return"comprar"==a&&(0==b&&(d="Nenhum imóveis para comprar"),1==b&&(d=b+" Imóvel para comprar"),b>1&&(d=b+" Imóveis para comprar")),"alugar"==a&&(0==b&&(d="Nenhum imóveis para alugar"),1==b&&(d=b+" Imóvel para alugar"),b>1&&(d=b+" Imóveis para alugar")),"lancamentos"==a&&(0==b&&(d="Nenhum lançamento de imóvel novo"),1==b&&(d=b+" Lançamento de imóvel novo"),b>1&&(d=b+" Lançamentos de imóveis novos")),d}function c(a){var b="comprar";return 2==a&&(b="alugar"),3==a&&(b="lancamentos"),b}function d(a,b){var c={lat:a,lng:b},d=new google.maps.Map(document.getElementById("map"),{center:c,scrollwheel:!1,zoom:15});new google.maps.Marker({position:c,map:d,title:"Hello World!"})}function e(a,b,c){var d=new Date,e=new Date;e.setTime(d.getTime()+864e5*c),document.cookie=a+"="+escape(b)+";expires="+e.toGMTString()}function f(a){var b=document.cookie,c=a+"=",d=b.indexOf("; "+c);if(d==-1){if(d=b.indexOf(c),0!=d)return null}else d+=2;var e=b.indexOf(";",d);return e==-1&&(e=b.length),unescape(b.substring(d+c.length,e))}var g=angular.module("App",["ngRoute","ngSanitize","ngResource"]),h="https://meuempreend.000webhostapp.com";g.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"app/templates/views/home.html",controller:"HomeCtrl",className:"home"}).when("/imoveis/:category",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl",className:"imoveis"}).when("/imoveis/:category/page/:numbPage",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl",className:"imoveis"}).when("/imoveis/:category/:type",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl",className:"imoveis"}).when("/imoveis/:category/:type/page/:numbPage",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl",className:"imoveis"}).when("/imoveis/:category/:type/:uf",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl",className:"imoveis"}).when("/imoveis/:category/:type/:uf/page/:numbPage",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl",className:"imoveis"}).when("/imoveis/:category/:type/:uf/:city",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl"}).when("/imoveis/:category/:type/:uf/:city/page/:numbPage",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl"}).when("/imoveis/:category/:type/:uf/:city/:district",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl",className:"imoveis"}).when("/imoveis/:category/:type/:uf/:city/:district/page/:numbPage",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl",className:"imoveis"}).when("/imovel/:slug",{templateUrl:"app/templates/views/imovel.html",controller:"ImovelCtrl",className:"imovel",routeName:"slug",css:["/dist/css/libs/owl.carousel.min.css"],js:["https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js","https://maps.googleapis.com/maps/api/js?key=AIzaSyCnTbp7Okfk-O8xkygex9gegjisIurICs0","/dist/js/libs/owl.carousel.min.js"]}).otherwise({templateUrl:"app/templates/views/404.html"}),b.html5Mode(!0).hashPrefix("!")}]);g.run(["$rootScope","$document",function(a,b){a.$on("$routeChangeStart",function(b,c,d){a.title="Conectando...",a.loaded=!0}),a.$on("$routeChangeSuccess",function(b,d,e){var f=d.params.category,g=f;if("home"==d.$$route.className&&(g=c(1)),"imovel"==d.$$route.className){var h=d.params.slug,i=h.indexOf("+");g="imovel "+h.substring(0,i)}a.bodyClass=d.$$route.className+" "+g,a.currentRoute=d.$$route.className,a.currentCat=f})}]),g.controller("HomeCtrl",["$scope","apiConnect","$location","$routeParams","$rootScope","$timeout",function(b,d,e,g,h,i){b.opcaoCategoria="1",b.opcaoTipo="1",b.buscar="",h.loaded=!1,h.title="Seu Imóvel novo pode está aqui.",b.getChangeValue=function(a){h.bodyClass="home "+c(a)},b.searchImovel=function(){var b=this.opcaoCategoria,c=this.opcaoTipo,d=a(b,c);e.path(d)},b.help=function(a){0==a&&i(function(){b.completing=!1,b.sugest=!1},200),1==a&&""==this.buscar&&(b.sugest=!0),1==a&&""!=this.buscar&&(b.completing=!0),console.log("buscar: "+this.buscar)},b.search=function(c){if(""==c)b.bairros="",b.cidades="",b.completing=!1,b.sugest=!0;else{b.urlPath=a(this.opcaoCategoria,this.opcaoTipo);var e=this.opcaoCategoria,f=this.opcaoTipo,g=c+"&cat="+e+"&type="+f;d.getLocalizacao("localizacao",g).then(function(a){"null"!=a.data?(b.sugest=!1,b.completing=!0,b.bairros=a.data.bairros,b.cidades=a.data.cidades,b.resultZero=!1):(b.bairros="",b.cidades="",b.resultZero=!0,b.completing=!0)},function(a){console.error(a)})}};var j=3,k=1,l=f("uf"),m=f("city"),n=j+"&type="+k+"&uf="+l+"&city="+m;d.getCustomHome("home",n).then(function(a){b.lancamentosImoveis=a.data.imovel},function(a){console.error(a)}),j=1,k=null,n=j+"&type="+k+"&uf="+l+"&city="+m,d.getCustomHome("home",n).then(function(a){b.sugestoesImoveis=a.data.imovel},function(a){console.error(a)})}]),g.controller("ImoveisCtrl",["$scope","apiConnect","$location","$routeParams","$rootScope",function(c,d,f,g,h){c.allImoveis="",c.category=g.category,c.type=g.type,console.log(g);var i="imoveis/";i+=null!=g.category?g.category:"",i+=null!=g.type?"/"+g.type:"",i+=null!=g.uf?"/"+g.uf:"",i+=null!=g.city?"/"+g.city:"",i+=null!=g.district?"/"+g.district:"",c.rotaDefultPage=i;var j={comprar:1,alugar:2,lancamentos:3},k={apartamento:1,casa:2,"casa-de-condominio":3,sobrado:4},l=null!=g.numbPage?g.numbPage:1,m=null!=g.type?k[g.type]:null,n=null!=g.uf?g.uf:null,o=null!=g.city?g.city:null,p=null!=g.district?g.district:null,q=j[g.category]+"&type="+m+"&uf="+n+"&city="+o+"&district="+p;d.getImoveis("imoveis",l,q).then(function(a){c.currentPage=a.data.currentPage;var d=parseInt(a.data.currentPage);h.loaded=!1,h.title=a.data.head.title,c.isPage=a.data.length>1?a.data.length:1,c.page=function(){for(var b=0,c=7,e=[],f=a.data.totalPages,g=1;g<=f;g++)1==g&&e.push({link:i,num:g,"class":g==d?"active":""}),g>1&&e.push({link:i+"/page/"+g,num:g,"class":g==d?"active":""});return f>7&&(d>3&&d<e.length-3&&(b=d-4,c=d+3),d>=e.length-3&&f>3&&(b=e.length-7,c=e.length)),e.slice(b,c)},c.prev=function(){var a=null;return d>1&&(a=parseInt(d)-1==1?"":"/page/"+(parseInt(d)-1)),a},c.next=function(){var b="/page/"+a.data.totalPages,c=a.data.totalPages;return d<c&&(b="/page/"+(parseInt(d)+1)),b},null!=n&&""!=n&&e("uf",n,1),null!=o&&""!=o&&e("city",o,1),c.resultTotal=b(g.category,a.data.retults,g.type),c.breadcumbs=a.data.breadcumbs,c.allImoveis=a.data.imovel},function(a){console.error(a)}),c.searchImovel=function(){var b=this.opcaoCategoria,c=this.opcaoTipo,d=(this.buscar,a(b,c));f.path(d)}}]),g.controller("ImovelCtrl",["$scope","apiConnect","$location","$routeParams","$rootScope","$window","$timeout",function(a,b,f,g,h,i,j){var k=g.slug;b.getImovel("imovel",encodeURIComponent(k)).then(function(b){h.loaded=!1,h.currentCat=c(b.data.imovel.categoria),a.isPage=b.data.length>1?b.data.length:1,h.title=b.data.head.title,a.breadcumbs=b.data.breadcumbs,a.imovel=b.data.imovel,a.relation=b.data.relacionados,e("uf",a.imovel.slug_uf[0],1),e("city",a.imovel.slug_city[0],1),a.googleMap=!0,""==b.data.imovel.address_lat&&""==b.data.imovel.address_lng&&(a.googleMap=!1);var f=parseFloat(b.data.imovel.address_lat),g=parseFloat(b.data.imovel.address_lng);j(function(){d(f,g),$(function(){$(".owl-carousel").owlCarousel({loop:!0,margin:10,items:1,autoplay:!0,autoplayTimeout:3e3,autoplayHoverPause:!0,nav:!0})})},500)},function(a){console.error(a)})}]),g.factory("apiConnect",["$q","$http",function(a,b){return{getCustomHome:function(c,d){"undefined"==d&&(d=null);var e=a.defer(),f=b.get(h+"/service/?info="+c+"&cat="+d+"&token=8c54dbf7be1b415eeecff30f9f2288c7");return f.then(function(a){e.resolve(a)},function(a){console.error(a)}),e.promise},getImoveis:function(c,d,e){"undefined"==e&&(e=null);var f=a.defer(),g=b.get(h+"/service/?info="+c+"&pag="+d+"&cat="+e+"&token=8c54dbf7be1b415eeecff30f9f2288c7");return g.then(function(a){f.resolve(a)},function(a){console.error(a)}),f.promise},getImovel:function(c,d){var e=a.defer(),f=b.get(h+"/service/?info="+c+"&slug="+d+"&token=8c54dbf7be1b415eeecff30f9f2288c7");return f.then(function(a){e.resolve(a)},function(a){console.error(a)}),e.promise},getLocalizacao:function(c,d){var e=a.defer(),f=b.get(h+"/service/?info="+c+"&param="+d+"&token=8c54dbf7be1b415eeecff30f9f2288c7");return f.then(function(a){e.resolve(a)},function(a){console.error(a)}),e.promise}}}])}();