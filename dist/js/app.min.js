!function(){"use strict";function a(a,b){var c="imoveis/";return 1==a&&(c+="comprar/"),2==a&&(c+="alugar/"),3==a&&(c+="lancamentos/"),1==b&&(c+="apartamento/"),2==b&&(c+="casa/"),3==b&&(c+="casa-de-condominio/"),4==b&&(c+="sobrado/"),c}function b(a,b,c){var d="";return"comprar"==a&&(0==b&&(d="Nenhum imóveis para comprar"),1==b&&(d=b+" Imóvel para comprar"),b>1&&(d=b+" Imóveis para comprar")),"alugar"==a&&(0==b&&(d="Nenhum imóveis para alugar"),1==b&&(d=b+" Imóvel para alugar"),b>1&&(d=b+" Imóveis para alugar")),"lancamentos"==a&&(0==b&&(d="Nenhum lançamento de imóvel novo"),1==b&&(d=b+" Lançamento de imóvel novo"),b>1&&(d=b+" Lançamentos de imóveis novos")),d}function c(a){var b="comprar";return 2==a&&(b="alugar"),3==a&&(b="lancamentos"),b}function d(a,b){var c={lat:a,lng:b},d=new google.maps.Map(document.getElementById("map"),{center:c,scrollwheel:!1,zoom:15});new google.maps.Marker({position:c,map:d,title:"Hello World!"})}var e=angular.module("App",["ngRoute","ngSanitize","ngResource"]),f="https://meuempreend.000webhostapp.com";e.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"app/templates/views/home.html",controller:"HomeCtrl",className:"home"}).when("/imoveis/:category",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl",className:"imoveis"}).when("/imoveis/:category/page/:numbPage",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl",className:"imoveis"}).when("/imoveis/:category/:type",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl",className:"imoveis"}).when("/imoveis/:category/:type/page/:numbPage",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl",className:"imoveis"}).when("/imoveis/:category/:type/:uf",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl",className:"imoveis"}).when("/imoveis/:category/:type/:uf/page/:numbPage",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl",className:"imoveis"}).when("/imoveis/:category/:type/:uf/:city",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl"}).when("/imoveis/:category/:type/:uf/:city/page/:numbPage",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl"}).when("/imoveis/:category/:type/:uf/:city/:district",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl",className:"imoveis"}).when("/imoveis/:category/:type/:uf/:city/:district/page/:numbPage",{templateUrl:"app/templates/views/lista-imoveis.html",controller:"ImoveisCtrl",className:"imoveis"}).when("/imovel/:slug",{templateUrl:"app/templates/views/imovel.html",controller:"ImovelCtrl",className:"imovel",routeName:"slug",js:["https://maps.googleapis.com/maps/api/js?key=AIzaSyCnTbp7Okfk-O8xkygex9gegjisIurICs0"]}).otherwise({templateUrl:"app/templates/views/404.html"}),b.html5Mode(!0).hashPrefix("!")}]);var g=function(a,b){var c=document.createElement("script");c.setAttribute("data-name",b),c.src=a,document.body.appendChild(c)};e.run(["$rootScope","$document",function(a,b){a.$on("$routeChangeStart",function(c,d,e){if(e&&e.$$route&&e.$$route.js){var f=angular.element(b[0].querySelectorAll("script[data-name"));f.remove()}d&&d.$$route&&d.$$route.js&&d.$$route.js.forEach(function(a,b){g(a,d.$$route.routeName)}),a.title="Conectando...",a.loaded=!0}),a.$on("$routeChangeSuccess",function(b,d,e){var f=d.params.category,g=f;if("home"==d.$$route.className&&(g=c(1)),"imovel"==d.$$route.className){var h=d.params.slug,i=h.indexOf("+");g="imovel "+h.substring(0,i)}a.bodyClass=d.$$route.className+" "+g,a.currentRoute=d.$$route.className,a.currentCat=f})}]),e.controller("HomeCtrl",["$scope","apiConnect","$location","$routeParams","$rootScope","$timeout",function(b,d,e,f,g,h){b.opcaoCategoria="1",b.opcaoTipo="1",b.buscar="",g.loaded=!1,g.title="Seu Imóvel novo pode está aqui.",b.getChangeValue=function(a){g.bodyClass="home "+c(a)},b.searchImovel=function(){var b=this.opcaoCategoria,c=this.opcaoTipo,d=a(b,c);e.path(d)},b.help=function(a){0==a&&h(function(){b.completing=!1,b.sugest=!1},200),1==a&&""==this.buscar&&(b.sugest=!0),1==a&&""!=this.buscar&&(b.completing=!0),console.log("buscar: "+this.buscar)},b.search=function(c){if(""==c)b.completing=!1,b.sugest=!0;else{b.urlPath=a(this.opcaoCategoria,this.opcaoTipo);var e=this.opcaoCategoria,f=this.opcaoTipo,g=c+"&cat="+e+"&type="+f;d.getLocalizacao("localizacao",g).then(function(a){b.sugest=!1,b.completing=!0,b.bairros=a.data.bairros,b.cidades=a.data.cidades},function(a){console.error(a)})}}}]),e.controller("ImoveisCtrl",["$scope","apiConnect","$location","$routeParams","$rootScope",function(c,d,e,f,g){c.allImoveis="",c.category=f.category,c.type=f.type,console.log(f);var h="imoveis/";h+=null!=f.category?f.category:"",h+=null!=f.type?"/"+f.type:"",h+=null!=f.uf?"/"+f.uf:"",h+=null!=f.city?"/"+f.city:"",h+=null!=f.district?"/"+f.district:"",c.rotaDefultPage=h;var i={comprar:1,alugar:2,lancamentos:3},j={apartamento:1,casa:2,"casa-de-condominio":3,sobrado:4},k=null!=f.numbPage?f.numbPage:1,l=null!=f.type?j[f.type]:null,m=null!=f.uf?f.uf:null,n=null!=f.city?f.city:null,o=null!=f.district?f.district:null,p=i[f.category]+"&type="+l+"&uf="+m+"&city="+n+"&district="+o;d.getImoveis("imoveis",k,p).then(function(a){c.currentPage=a.data.currentPage;var d=parseInt(a.data.currentPage);g.loaded=!1,g.title=a.data.head.title,c.isPage=a.data.length>1?a.data.length:1,c.page=function(){for(var b=0,c=7,e=[],f=a.data.totalPages,g=1;g<=f;g++)1==g&&e.push({link:h,num:g,"class":g==d?"active":""}),g>1&&e.push({link:h+"/page/"+g,num:g,"class":g==d?"active":""});return f>7&&(d>3&&d<e.length-3&&(b=d-4,c=d+3),d>=e.length-3&&f>3&&(b=e.length-7,c=e.length)),e.slice(b,c)},c.prev=function(){var a=null;return d>1&&(a=parseInt(d)-1==1?"":"/page/"+(parseInt(d)-1)),a},c.next=function(){var b="/page/"+a.data.totalPages,c=a.data.totalPages;return d<c&&(b="/page/"+(parseInt(d)+1)),b},c.resultTotal=b(f.category,a.data.retults,f.type),c.breadcumbs=a.data.breadcumbs,c.allImoveis=a.data.imovel},function(a){console.error(a)}),c.searchImovel=function(){var b=this.opcaoCategoria,c=this.opcaoTipo,d=(this.buscar,a(b,c));e.path(d)}}]),e.controller("ImovelCtrl",["$scope","apiConnect","$location","$routeParams","$rootScope","$window","$timeout",function(a,b,e,f,g,h,i){var j=f.slug;b.getImovel("imovel",encodeURIComponent(j)).then(function(b){g.loaded=!1,g.currentCat=c(b.data.imovel.categoria),a.isPage=b.data.length>1?b.data.length:1,g.title=b.data.head.title,a.breadcumbs=b.data.breadcumbs,a.imovel=b.data.imovel,a.relation=b.data.relacionados;var e=parseFloat(b.data.imovel.address_lat),f=parseFloat(b.data.imovel.address_lng);i(function(){d(e,f),console.log(e),console.log(f)},500)},function(a){console.error(a)})}]),e.factory("apiConnect",["$q","$http",function(a,b){return{getImoveis:function(c,d,e){"undefined"==e&&(e=null);var g=a.defer(),h=b.get(f+"/service/?info="+c+"&pag="+d+"&cat="+e+"&token=8c54dbf7be1b415eeecff30f9f2288c7");return h.then(function(a){g.resolve(a)},function(a){console.error(a)}),g.promise},getImovel:function(c,d){var e=a.defer(),g=b.get(f+"/service/?info="+c+"&slug="+d+"&token=8c54dbf7be1b415eeecff30f9f2288c7");return g.then(function(a){e.resolve(a)},function(a){console.error(a)}),e.promise},getLocalizacao:function(c,d){var e=a.defer(),g=b.get(f+"/service/?info="+c+"&param="+d+"&token=8c54dbf7be1b415eeecff30f9f2288c7");return g.then(function(a){e.resolve(a)},function(a){console.error(a)}),e.promise}}}])}();